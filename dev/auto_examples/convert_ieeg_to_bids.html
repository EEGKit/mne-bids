
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>08. Convert iEEG data to BIDS format &#8212; MNE-BIDS 0.10.dev0 documentation</title>
    
    <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
    <!-- add `style` or `link` tags with your CSS `@font-face` declarations here -->
    <!-- ... and a `style` tag with setting `font-family` in `body` and `.header-style` -->
    <!-- ... and optionally preload the `woff2` for snappier page loads -->
    <!-- or add a `style` tag with a font fallback chain with good cross-platform coverage -->
    <style>
        body,.header-style {font-family: 'Source Sans Pro', sans-serif;}
        code,kbd,pre,samp {font-family: 'Source Code Pro', monospace;}
    </style>

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    
    <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="09. Storing empty room data in BIDS format" href="convert_empty_room.html" />
    <link rel="prev" title="07. Save and load T1-weighted MRI scan along with anatomical landmarks in BIDS" href="convert_mri_and_trans.html" />
    <link rel="canonical" href="https://mne.tools/mne-bids/stable/index.html" />
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="../_static/scrollfix.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">MNE-BIDS</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../whats_new.html">
  News
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../install.html">
  Install
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../use.html">
  Use
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api.html">
  API
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../generated/cli.html">
  CLI
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../contribute.html">
  Contribute
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <div class="dropdown">
    <button type="button" class="btn btn-primary btn-sm navbar-btn dropdown-toggle" id="dLabelMore" data-toggle="dropdown">
        v0.10.dev0
        <span class="caret"></span>
    </button>
    <div class="dropdown-menu list-group-flush py-0" aria-labelledby="dLabelMore">
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/dev/index.html">v0.10 (devel)</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/stable/index.html">v0.9 (stable)</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/v0.8/index.html">v0.8</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/v0.7/index.html">v0.7</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/v0.6/index.html">v0.6</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/v0.5/index.html">v0.5</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/v0.4/index.html">v0.4</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/v0.3/index.html">v0.3</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/v0.2/index.html">v0.2</a>
        <a class="list-group-item list-group-item-action py-1" href="https://mne.tools/mne-bids/v0.1/index.html">v0.1</a>
    </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Quick Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/mne-tools/mne-bids" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://mne.discourse.group/tags/mne-bids" rel="noopener" target="_blank" title="Discourse"><span><i class="fab fa-discourse"></i></span>
            <label class="sr-only">Discourse</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="read_bids_datasets.html">
   01. Read BIDS datasets
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="convert_mne_sample.html">
   02. Convert MNE sample data to BIDS format
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="mark_bad_channels.html">
   03. Interactive data inspection and bad channel selection
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="convert_eeg_to_bids.html">
   04. Convert EEG data to BIDS format
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="convert_group_studies.html">
   05. BIDS conversion for group studies
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="rename_brainvision_files.html">
   06. Rename BrainVision EEG data files
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="convert_mri_and_trans.html">
   07. Save and load T1-weighted MRI scan along with anatomical landmarks in BIDS
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   08. Convert iEEG data to BIDS format
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="convert_empty_room.html">
   09. Storing empty room data in BIDS format
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="bidspath.html">
   10. An introduction to BIDSPath
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="create_bids_folder.html">
   11. Creating BIDS-compatible folder names and filenames
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="update_bids_datasets.html">
   12. Updating BIDS datasets
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="anonymize_dataset.html">
   13. Anonymizing a BIDS dataset
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-1-download-the-data">
   Step 1: Download the data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#bids-vs-mne-python-coordinate-systems">
   BIDS vs MNE-Python Coordinate Systems
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-2-formatting-as-bids">
   Step 2: Formatting as BIDS
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-3-load-channels-from-bids-formatted-dataset-and-compare">
   Step 3: Load channels from BIDS-formatted dataset and compare
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-4-cite-mne-bids">
   Step 4: Cite mne-bids
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#step-5-store-coordinates-in-a-template-space">
   Step 5: Store coordinates in a template space
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-convert-ieeg-to-bids-py"><span class="std std-ref">here</span></a>
to download the full example code or to run this example in your browser via Binder</p>
</div>
<section class="sphx-glr-example-title" id="convert-ieeg-data-to-bids-format">
<span id="sphx-glr-auto-examples-convert-ieeg-to-bids-py"></span><h1>08. Convert iEEG data to BIDS format<a class="headerlink" href="#convert-ieeg-data-to-bids-format" title="Permalink to this headline">¶</a></h1>
<p>In this example, we use MNE-BIDS to create a BIDS-compatible directory of iEEG
data. Specifically, we will follow these steps:</p>
<ol class="arabic simple">
<li><p>Download some iEEG data.</p></li>
<li><p>Load the data, extract information, and save in a new BIDS directory.</p></li>
<li><p>Check the result and compare it with the standard.</p></li>
<li><p>Cite MNE-BIDS.</p></li>
<li><p>Repeat the process for the <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code> template coordinate frame.</p></li>
</ol>
<p>The iEEG data will be written by <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a> with
the addition of extra metadata elements in the following files:</p>
<ul class="simple">
<li><p>the sidecar file <code class="docutils literal notranslate"><span class="pre">ieeg.json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">electrodes.tsv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coordsystem.json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">events.tsv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">channels.tsv</span></code></p></li>
</ul>
<p>Compared to EEG data, the main differences are within the
<code class="docutils literal notranslate"><span class="pre">coordsystem.json</span></code> and <code class="docutils literal notranslate"><span class="pre">electrodes.tsv</span></code> files.
For more information on these files,
refer to the <a class="reference external" href="https://bids-specification.readthedocs.io/en/latest/04-modality-specific-files/04-intracranial-electroencephalography.html">iEEG part of the BIDS specification</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authors: Adam Li &lt;adam2392@gmail.com&gt;</span>
<span class="c1">#          Stefan Appelhoff &lt;stefan.appelhoff@mailbox.org&gt;</span>
<span class="c1">#          Alex Rockhill &lt;aprockhill@mailbox.org&gt;</span>
<span class="c1">#</span>
<span class="c1"># License: BSD-3-Clause</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os.path</span> <span class="k">as</span> <span class="nn">op</span>
<span class="kn">import</span> <span class="nn">shutil</span>

<span class="kn">from</span> <span class="nn">nilearn.plotting</span> <span class="kn">import</span> <a href="https://nilearn.github.io/modules/generated/nilearn.plotting.plot_anat.html#nilearn.plotting.plot_anat" title="nilearn.plotting.plot_anat" class="sphx-glr-backref-module-nilearn-plotting sphx-glr-backref-type-py-function"><span class="n">plot_anat</span></a>

<span class="kn">import</span> <span class="nn">mne</span>
<span class="kn">from</span> <span class="nn">mne_bids</span> <span class="kn">import</span> <span class="p">(</span><a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class"><span class="n">BIDSPath</span></a><span class="p">,</span> <a href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_raw_bids</span></a><span class="p">,</span> <a href="../generated/mne_bids.write_anat.html#mne_bids.write_anat" title="mne_bids.write_anat" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_anat</span></a><span class="p">,</span>
                      <a href="../generated/mne_bids.get_anat_landmarks.html#mne_bids.get_anat_landmarks" title="mne_bids.get_anat_landmarks" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">get_anat_landmarks</span></a><span class="p">,</span> <a href="../generated/mne_bids.read_raw_bids.html#mne_bids.read_raw_bids" title="mne_bids.read_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">read_raw_bids</span></a><span class="p">,</span>
                      <a href="../generated/mne_bids.search_folder_for_text.html#mne_bids.search_folder_for_text" title="mne_bids.search_folder_for_text" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">search_folder_for_text</span></a><span class="p">,</span> <a href="../generated/mne_bids.print_dir_tree.html#mne_bids.print_dir_tree" title="mne_bids.print_dir_tree" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">print_dir_tree</span></a><span class="p">)</span>
</pre></div>
</div>
<section id="step-1-download-the-data">
<h2>Step 1: Download the data<a class="headerlink" href="#step-1-download-the-data" title="Permalink to this headline">¶</a></h2>
<p>First, we need some data to work with. We will use the
data downloaded via MNE-Python’s <code class="docutils literal notranslate"><span class="pre">datasets</span></code> API:
<a class="reference external" href="https://mne.tools/dev/generated/mne.datasets.misc.data_path.html#mne.datasets.misc.data_path" title="(in MNE v1.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.datasets.misc.data_path()</span></code></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">misc_path</span> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.datasets.misc.data_path.html#mne.datasets.misc.data_path" title="mne.datasets.misc.data_path" class="sphx-glr-backref-module-mne-datasets-misc sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">misc</span><span class="o">.</span><span class="n">data_path</span></a><span class="p">()</span>

<span class="c1"># The electrode coords data are in the tsv file format</span>
<span class="c1"># which is easily read in using numpy</span>
<span class="n">raw</span> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.io.read_raw_fif.html#mne.io.read_raw_fif" title="mne.io.read_raw_fif" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_raw_fif</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span>
    <span class="n">misc_path</span><span class="p">,</span> <span class="s1">&#39;seeg&#39;</span><span class="p">,</span> <span class="s1">&#39;sample_seeg_ieeg.fif&#39;</span><span class="p">))</span>
<a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;line_freq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">60</span>  <span class="c1"># specify power line frequency as required by BIDS</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><span class="n">misc_path</span><span class="p">,</span> <span class="s1">&#39;seeg&#39;</span><span class="p">)</span>  <span class="c1"># Freesurfer recon-all directory</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Using default location ~/mne_data for misc...
Opening raw data file /home/circleci/mne_data/MNE-misc-data/seeg/sample_seeg_ieeg.fif...
    Range : 1310640 ... 1370605 =   1311.411 ...  1371.411 secs
Ready.
</pre></div>
</div>
<p>When the locations of the channels in this dataset were found
in <a class="reference external" href="https://mne.tools/dev/auto_tutorials/clinical/10_ieeg_localize.html">Locating Intracranial Electrode Contacts</a>,
the T1 was aligned to ACPC. So, this montage is in an
<a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/CoordinateSystems">ACPC-aligned coordinate system</a>.
We can either save the channel positions in the subject’s anatomical
space (from their T1 image) or we can transform to a template space
such as <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code>. To save them in the individual space, it is
required that the T1 have been aligned to ACPC and then the channel positions
be in terms of that coordinate system. Automated alignment to ACPC has not
been implemented in MNE yet, so if the channel positions are not in
an ACPC-aligned coordinate system, using a template (like <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code>)
is the best option.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># estimate the transformation from &quot;head&quot; to &quot;mri&quot; space</span>
<a href="https://mne.tools/dev/generated/mne.transforms.Transform.html#mne.transforms.Transform" title="mne.transforms.Transform" class="sphx-glr-backref-module-mne-transforms sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">trans</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.coreg.estimate_head_mri_t.html#mne.coreg.estimate_head_mri_t" title="mne.coreg.estimate_head_mri_t" class="sphx-glr-backref-module-mne-coreg sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">coreg</span><span class="o">.</span><span class="n">estimate_head_mri_t</span></a><span class="p">(</span><span class="s1">&#39;sample_seeg&#39;</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a><span class="p">)</span>
</pre></div>
</div>
<p>Now let’s convert the montage to “mri”</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.get_montage" title="mne.io.BaseRaw.get_montage" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">get_montage</span></a><span class="p">()</span>
<a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage.apply_trans" title="mne.channels.DigMontage.apply_trans" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-method"><span class="n">montage</span><span class="o">.</span><span class="n">apply_trans</span></a><span class="p">(</span><a href="https://mne.tools/dev/generated/mne.transforms.Transform.html#mne.transforms.Transform" title="mne.transforms.Transform" class="sphx-glr-backref-module-mne-transforms sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">trans</span></a><span class="p">)</span>  <span class="c1"># head-&gt;mri</span>
</pre></div>
</div>
</section>
<section id="bids-vs-mne-python-coordinate-systems">
<h2>BIDS vs MNE-Python Coordinate Systems<a class="headerlink" href="#bids-vs-mne-python-coordinate-systems" title="Permalink to this headline">¶</a></h2>
<p>BIDS has many acceptable coordinate systems for iEEG, which can be viewed in
<a class="reference external" href="https://bids-specification.readthedocs.io/en/stable/99-appendices/08-coordinate-systems.html">appendix VIII</a> of the BIDS specification.
However, MNE-BIDS depends on MNE-Python and MNE-Python does not support all
these coordinate systems (yet).</p>
<p>MNE-Python has a few tutorials on this topic:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://mne.tools/dev/auto_tutorials/source-modeling/plot_background_freesurfer_mne">background on FreeSurfer</a></p></li>
<li><p><a class="reference external" href="https://mne.tools/dev/auto_tutorials/source-modeling/plot_source_alignment.html">MNE-Python coordinate frames</a></p></li>
</ul>
<p>Currently, MNE-Python supports the <code class="docutils literal notranslate"><span class="pre">mni_tal</span></code> and <code class="docutils literal notranslate"><span class="pre">mri</span></code> coordinate frames,
corresponding to the <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code> and <code class="docutils literal notranslate"><span class="pre">ACPC</span></code> (for an ACPC-aligned T1) BIDS
coordinate systems respectively. All other coordinate coordinate frames in
MNE-Python if written with <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne_bids.write_raw_bids()</span></code></a> are written with
coordinate system <code class="docutils literal notranslate"><span class="pre">'Other'</span></code>. Note, then we suggest using
<a class="reference internal" href="../generated/mne_bids.update_sidecar_json.html#mne_bids.update_sidecar_json" title="mne_bids.update_sidecar_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne_bids.update_sidecar_json()</span></code></a> to update the sidecar
<code class="docutils literal notranslate"><span class="pre">*_coordsystem.json</span></code> file to add additional information.</p>
</section>
<section id="step-2-formatting-as-bids">
<h2>Step 2: Formatting as BIDS<a class="headerlink" href="#step-2-formatting-as-bids" title="Permalink to this headline">¶</a></h2>
<p>Now, let us format the <em class="xref py py-obj">Raw</em> object into BIDS.</p>
<p>With this step, we have everything to start a new BIDS directory using
our data. To do that, we can use <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a>
Generally, <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a> tries to extract as much
meta data as possible from the raw data and then formats it in a BIDS
compatible way. <a class="reference internal" href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">write_raw_bids()</span></code></a> takes a bunch of inputs, most of
which are however optional. The required inputs are:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">raw</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">bids_basename</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">bids_root</span></code></p></li>
</ul>
<p>… as you can see in the docstring:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><a href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_raw_bids</span></a><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Save raw data to a BIDS-compliant folder structure.

    .. warning:: * The original file is simply copied over if the original
                   file format is BIDS-supported for that datatype. Otherwise,
                   this function will convert to a BIDS-supported file format
                   while warning the user. For EEG and iEEG data, conversion
                   will be to BrainVision format; for MEG, conversion will be
                   to FIFF.

                 * ``mne-bids`` will infer the manufacturer information
                   from the file extension. If your file format is non-standard
                   for the manufacturer, please update the manufacturer field
                   in the sidecars manually.

    Parameters
    ----------
    raw : mne.io.Raw
        The raw data. It must be an instance of `mne.io.Raw` that is not
        already loaded from disk unless ``allow_preload`` is explicitly set
        to ``True``. See warning for the ``allow_preload`` parameter.
    bids_path : BIDSPath
        The file to write. The `mne_bids.BIDSPath` instance passed here
        **must** have the ``subject``, ``task``, and ``root`` attributes set.
        If the ``datatype`` attribute is not set, it will be inferred from the
        recording data type found in ``raw``. In case of multiple data types,
        the ``.datatype`` attribute must be set.
        Example::

            bids_path = BIDSPath(subject=&#39;01&#39;, session=&#39;01&#39;, task=&#39;testing&#39;,
                                 acquisition=&#39;01&#39;, run=&#39;01&#39;, datatype=&#39;meg&#39;,
                                 root=&#39;/data/BIDS&#39;)

        This will write the following files in the correct subfolder ``root``::

            sub-01_ses-01_task-testing_acq-01_run-01_meg.fif
            sub-01_ses-01_task-testing_acq-01_run-01_meg.json
            sub-01_ses-01_task-testing_acq-01_run-01_channels.tsv
            sub-01_ses-01_acq-01_coordsystem.json

        and the following one if ``events_data`` is not ``None``::

            sub-01_ses-01_task-testing_acq-01_run-01_events.tsv

        and add a line to the following files::

            participants.tsv
            scans.tsv

        Note that the extension is automatically inferred from the raw
        object.
    events_data : path-like | np.ndarray | None
        Use this parameter to specify events to write to the ``*_events.tsv``
        sidecar file, additionally to the object&#39;s `mne.Annotations` (which
        are always written).
        If a path, specifies the location of an MNE events file.
        If an array, the MNE events array (shape: ``(n_events, 3)``).
        If a path or an array and ``raw.annotations`` exist, the union of
        ``event_data`` and ``raw.annotations`` will be written.
        Corresponding descriptions for all event IDs (listed in the third
        column of the MNE events array) must be specified via the ``event_id``
        parameter; otherwise, an exception is raised.
        If ``None``, events will only be inferred from the the raw object&#39;s
        `mne.Annotations`.

        .. note::
           If ``not None``, writes the union of ``events_data`` and
           ``raw.annotations``. If you wish to **only** write
           ``raw.annotations``, pass ``events_data=None``. If you want to
           **exclude** the events in ``raw.annotations`` from being written,
           call ``raw.set_annotations(None)`` before invoking this function.

        .. note::
           Descriptions of all event IDs must be specified via the ``event_id``
           parameter.

    event_id : dict | None
        Descriptions of all event IDs, if you passed ``events_data``.
        The descriptions will be written to the ``trial_type`` column in
        ``*_events.tsv``. The dictionary keys correspond to the event
        descriptions and the values to the event IDs. You must specify a
        description for all event IDs in ``events_data``.
    anonymize : dict | None
        If `None` (default), no anonymization is performed.
        If a dictionary, data will be anonymized depending on the dictionary
        keys: ``daysback`` is a required key, ``keep_his`` is optional.

        ``daysback`` : int
            Number of days by which to move back the recording date in time.
            In studies with multiple subjects the relative recording date
            differences between subjects can be kept by using the same number
            of ``daysback`` for all subject anonymizations. ``daysback`` should
            be great enough to shift the date prior to 1925 to conform with
            BIDS anonymization rules.

        ``keep_his`` : bool
            If ``False`` (default), all subject information next to the
            recording date will be overwritten as well. If ``True``, keep
            subject information apart from the recording date.

        ``keep_source`` : bool
            Whether to store the name of the ``raw`` input file in the
            ``source`` column of ``scans.tsv``. By default, this information
            is not stored.

    format : &#39;auto&#39; | &#39;BrainVision&#39; | &#39;EDF&#39; | &#39;FIF&#39;
        Controls the file format of the data after BIDS conversion. If
        ``&#39;auto&#39;``, MNE-BIDS will attempt to convert the input data to BIDS
        without a change of the original file format. A conversion to a
        different file format (BrainVision, EDF, or FIF) will only take place
        when the original file format lacks some necessary features. Conversion
        can be forced to BrainVision or EDF for (i)EEG, and to FIF for MEG
        data.
    symlink : bool
        Instead of copying the source files, only create symbolic links to
        preserve storage space. This is only allowed when not anonymizing the
        data (i.e., ``anonymize`` must be ``None``).

        .. note::
           Symlinks currently only work with FIFF files. In case of split
           files, only a link to the first file will be created, and
           :func:`mne_bids.read_raw_bids` will correctly handle reading the
           data again.

        .. note::
           Symlinks are currently only supported on macOS and Linux. We will
           add support for Windows 10 at a later time.

    empty_room : BIDSPath | None
        The empty-room recording to be associated with this file. This is
        only supported for MEG data, and only if the ``root`` attributes of
        ``bids_path`` and ``empty_room`` are the same. Pass ``None``
        (default) if you do not wish to specify an associated empty-room
        recording.
    allow_preload : bool
        If ``True``, allow writing of preloaded raw objects (i.e.,
        ``raw.preload`` is ``True``). Because the original file is ignored, you
        must specify what ``format`` to write (not ``auto``).

        .. warning::
            BIDS was originally designed for unprocessed or minimally processed
            data. For this reason, by default, we prevent writing of preloaded
            data that may have been modified. Only use this option when
            absolutely necessary: for example, manually converting from file
            formats not supported by MNE or writing preprocessed derivatives.
            Be aware that these use cases are not fully supported.
    montage : mne.channels.DigMontage | None
        The montage with channel positions if channel position data are
        to be stored in a format other than &quot;head&quot; (the internal MNE
        coordinate frame that the data in ``raw`` is stored in).
    acpc_aligned : bool
        It is difficult to check whether the T1 scan is ACPC aligned which
        means that &quot;mri&quot; coordinate space is &quot;ACPC&quot; BIDS coordinate space.
        So, this flag is required to be True when the digitization data
        is in &quot;mri&quot; for intracranial data to confirm that the T1 is
        ACPC-aligned.
    overwrite : bool
        Whether to overwrite existing files or data in files.
        Defaults to ``False``.

        If ``True``, any existing files with the same BIDS parameters
        will be overwritten with the exception of the ``*_participants.tsv``
        and ``*_scans.tsv`` files. For these files, parts of pre-existing data
        that match the current data will be replaced. For
        ``*_participants.tsv``, specifically, age, sex and hand fields will be
        overwritten, while any manually added fields in ``participants.json``
        and ``participants.tsv`` by a user will be retained.
        If ``False``, no existing data will be overwritten or
        replaced.

    verbose : bool | str | int | None
        Control verbosity of the logging output. If ``None``, use the default
        verbosity level. See the :ref:`logging documentation &lt;tut-logging&gt;` and
        :func:`mne.verbose` for details. Should only be passed as a keyword
        argument.

    Returns
    -------
    bids_path : BIDSPath
        The path of the created data file.

    Notes
    -----
    You should ensure that ``raw.info[&#39;subject_info&#39;]`` and
    ``raw.info[&#39;meas_date&#39;]`` are set to proper (not-``None``) values to allow
    for the correct computation of each participant&#39;s age when creating
    ``*_participants.tsv``.

    This function will convert existing `mne.Annotations` from
    ``raw.annotations`` to events. Additionally, any events supplied via
    ``events_data`` will be written too. To avoid writing of annotations,
    remove them from the raw file via ``raw.set_annotations(None)`` before
    invoking ``write_raw_bids``.

    To write events encoded in a ``STIM`` channel, you first need to create the
    events array manually and pass it to this function:

    ..
        events = mne.find_events(raw, min_duration=0.002)
        write_raw_bids(..., events_data=events)

    See the documentation of :func:`mne.find_events` for more information on
    event extraction from ``STIM`` channels.

    When anonymizing ``.edf`` files, then the file format for EDF limits
    how far back we can set the recording date. Therefore, all anonymized
    EDF datasets will have an internal recording date of ``01-01-1985``,
    and the actual recording date will be stored in the ``scans.tsv``
    file&#39;s ``acq_time`` column.

    ``write_raw_bids`` will generate a ``dataset_description.json`` file
    if it does not already exist. Minimal metadata will be written there.
    If one sets ``overwrite`` to ``True`` here, it will not overwrite an
    existing ``dataset_description.json`` file.
    If you need to add more data there, or overwrite it, then you should
    call :func:`mne_bids.make_dataset_description` directly.

    When writing EDF or BDF files, all file extensions are forced to be
    lower-case, in compliance with the BIDS specification.

    See Also
    --------
    mne.io.Raw.anonymize
    mne.find_events
    mne.Annotations
    mne.events_from_annotations
</pre></div>
</div>
<p>Let us initialize some of the necessary data for the subject.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># There is a subject, and specific task for the dataset.</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">task</span></a> <span class="o">=</span> <span class="s1">&#39;motor&#39;</span>

<span class="c1"># get MNE-Python directory w/ example data</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">mne_data_dir</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.get_config.html#mne.get_config" title="mne.get_config" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">get_config</span></a><span class="p">(</span><span class="s1">&#39;MNE_DATASETS_MISC_PATH&#39;</span><span class="p">)</span>

<span class="c1"># There is the root directory for where we will write our data.</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">mne_data_dir</span></a><span class="p">,</span> <span class="s1">&#39;ieeg_bids&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To ensure the output path doesn’t contain any leftover files from previous
tests and example runs, we simply delete it.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not delete directories that may contain important data!</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.exists" title="os.path.exists" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">exists</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">):</span>
    <a href="https://docs.python.org/3/library/shutil.html#shutil.rmtree" title="shutil.rmtree" class="sphx-glr-backref-module-shutil sphx-glr-backref-type-py-function"><span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">)</span>
</pre></div>
</div>
<p>Now we just need make a <a class="reference internal" href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath"><code class="xref py py-class docutils literal notranslate"><span class="pre">mne_bids.BIDSPath</span></code></a> to save the data.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>By passing <code class="docutils literal notranslate"><span class="pre">acpc_aligned=True</span></code>, we are affirming that
the T1 in this dataset is aligned to ACPC. This is very
difficult to check with a computer which is why this
step is required.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Now convert our data to be in a new BIDS dataset.</span>
<a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a> <span class="o">=</span> <a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class"><span class="n">BIDSPath</span></a><span class="p">(</span><span class="n">subject</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subject_id</span></a><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">task</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">task</span></a><span class="p">,</span> <span class="n">root</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">)</span>

<span class="c1"># plot T1 to show that it is ACPC-aligned</span>
<span class="c1"># note that the origin is centered on the anterior commissure (AC)</span>
<span class="c1"># with the y-axis passing through the posterior commissure (PC)</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">T1_fname</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a><span class="p">,</span> <span class="s1">&#39;sample_seeg&#39;</span><span class="p">,</span> <span class="s1">&#39;mri&#39;</span><span class="p">,</span> <span class="s1">&#39;T1.mgz&#39;</span><span class="p">)</span>
<a href="https://nilearn.github.io/modules/generated/nilearn.plotting.displays.OrthoSlicer.html#nilearn.plotting.displays.OrthoSlicer" title="nilearn.plotting.displays.OrthoSlicer" class="sphx-glr-backref-module-nilearn-plotting-displays sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span></a> <span class="o">=</span> <a href="https://nilearn.github.io/modules/generated/nilearn.plotting.plot_anat.html#nilearn.plotting.plot_anat" title="nilearn.plotting.plot_anat" class="sphx-glr-backref-module-nilearn-plotting sphx-glr-backref-type-py-function"><span class="n">plot_anat</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">T1_fname</span></a><span class="p">,</span> <span class="n">cut_coords</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span><span class="o">.</span><span class="n">axes</span></a><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;AC&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mf">2.</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.</span><span class="p">,</span> <span class="o">-</span><span class="mf">40.</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span>
                          <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>
<a href="https://docs.python.org/3/library/stdtypes.html#dict" title="builtins.dict" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fig</span><span class="o">.</span><span class="n">axes</span></a><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="s1">&#39;PC&#39;</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">31.</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">80.</span><span class="p">,</span> <span class="o">-</span><span class="mf">40.</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span>
                          <span class="n">arrowprops</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">))</span>

<span class="c1"># write ACPC-aligned T1</span>
<a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">landmarks</span></a> <span class="o">=</span> <a href="../generated/mne_bids.get_anat_landmarks.html#mne_bids.get_anat_landmarks" title="mne_bids.get_anat_landmarks" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">get_anat_landmarks</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">T1_fname</span></a><span class="p">,</span> <a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">,</span> <a href="https://mne.tools/dev/generated/mne.transforms.Transform.html#mne.transforms.Transform" title="mne.transforms.Transform" class="sphx-glr-backref-module-mne-transforms sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">trans</span></a><span class="p">,</span>
                               <span class="s1">&#39;sample_seeg&#39;</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a><span class="p">)</span>
<a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">T1_bids_path</span></a> <span class="o">=</span> <a href="../generated/mne_bids.write_anat.html#mne_bids.write_anat" title="mne_bids.write_anat" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_anat</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">T1_fname</span></a><span class="p">,</span> <a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">,</span> <span class="n">deface</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">landmarks</span></a><span class="o">=</span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">landmarks</span></a><span class="p">)</span>

<span class="c1"># write `raw` to BIDS and anonymize it (converts to BrainVision format)</span>
<span class="c1">#</span>
<span class="c1"># we need to pass the `montage` argument for coordinate frames other than</span>
<span class="c1"># &quot;head&quot; which is what MNE uses internally in the `raw` object</span>
<span class="c1">#</span>
<span class="c1"># `acpc_aligned=True` affirms that our MRI is aligned to ACPC</span>
<span class="c1"># if this is not true, convert to `fsaverage` (see below)!</span>
<a href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_raw_bids</span></a><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">,</span> <span class="n">anonymize</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">daysback</span><span class="o">=</span><span class="mi">30000</span><span class="p">),</span>
               <a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a><span class="o">=</span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a><span class="p">,</span> <span class="n">acpc_aligned</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># check our output</span>
<a href="../generated/mne_bids.print_dir_tree.html#mne_bids.print_dir_tree" title="mne_bids.print_dir_tree" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">print_dir_tree</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">)</span>
</pre></div>
</div>
<img src="../_images/sphx_glr_convert_ieeg_to_bids_001.png" srcset="../_images/sphx_glr_convert_ieeg_to_bids_001.png" alt="convert ieeg to bids" class = "sphx-glr-single-img"/><p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/anat/sub-1_T1w.json&#39;...
Opening raw data file /home/circleci/mne_data/MNE-misc-data/seeg/sample_seeg_ieeg.fif...
    Range : 1310640 ... 1370605 =   1311.411 ...  1371.411 secs
Ready.
/home/circleci/project/mne_bids/utils.py:325: RuntimeWarning: `daysback` is too small; the measurement date is after 1925, which is not recommended by BIDS.The minimum `daysback` value for changing the measurement date of this data to before this date is 34624
  warn(&#39;`daysback` is too small; the measurement date &#39;
/home/circleci/project/mne_bids/write.py:1525: RuntimeWarning: Converting data files to BrainVision format for anonymization
  warn(&#39;Converting data files to BrainVision format &#39;
Writing &#39;/home/circleci/mne_data/ieeg_bids/README&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/participants.tsv&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/participants.json&#39;...
/home/circleci/project/mne_bids/dig.py:339: RuntimeWarning: Fiducial point nasion not found, assuming identity unknown to head transformation
  raw.set_montage(montage)
Writing electrodes file to... /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_electrodes.tsv
Writing coordsytem file to... /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_coordsystem.json
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_space-ACPC_electrodes.tsv&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_space-ACPC_coordsystem.json&#39;...
Used Annotations descriptions: [&#39;Fixation&#39;, &#39;Go Cue&#39;, &#39;ISI Onset&#39;, &#39;Response&#39;]
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_events.tsv&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/dataset_description.json&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_ieeg.json&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_channels.tsv&#39;...
/home/circleci/project/mne_bids/write.py:1657: RuntimeWarning: Converting data files to BrainVision format
  warn(&#39;Converting data files to BrainVision format&#39;)
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/sub-1_scans.tsv&#39;...
Wrote /home/circleci/mne_data/ieeg_bids/sub-1/sub-1_scans.tsv entry with ieeg/sub-1_task-motor_ieeg.vhdr.
|ieeg_bids/
|--- README
|--- dataset_description.json
|--- participants.json
|--- participants.tsv
|--- sub-1/
|------ sub-1_scans.tsv
|------ anat/
|--------- sub-1_T1w.json
|--------- sub-1_T1w.nii.gz
|------ ieeg/
|--------- sub-1_space-ACPC_coordsystem.json
|--------- sub-1_space-ACPC_electrodes.tsv
|--------- sub-1_task-motor_channels.tsv
|--------- sub-1_task-motor_events.tsv
|--------- sub-1_task-motor_ieeg.eeg
|--------- sub-1_task-motor_ieeg.json
|--------- sub-1_task-motor_ieeg.vhdr
|--------- sub-1_task-motor_ieeg.vmrk
</pre></div>
</div>
<p>MNE-BIDS has created a suitable directory structure for us, and among other
meta data files, it started an <code class="docutils literal notranslate"><span class="pre">events.tsv`</span></code> and <code class="docutils literal notranslate"><span class="pre">channels.tsv</span></code> file,
and created an initial <code class="docutils literal notranslate"><span class="pre">dataset_description.json</span></code> file on top!</p>
<p>Now it’s time to manually check the BIDS directory and the meta files to add
all the information that MNE-BIDS could not infer. For instance, you must
describe <code class="docutils literal notranslate"><span class="pre">iEEGReference</span></code> and <code class="docutils literal notranslate"><span class="pre">iEEGGround</span></code> yourself.
It’s easy to find these by searching for <code class="docutils literal notranslate"><span class="pre">&quot;n/a&quot;</span></code> in the sidecar files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="../generated/mne_bids.search_folder_for_text.html#mne_bids.search_folder_for_text" title="mne_bids.search_folder_for_text" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">search_folder_for_text</span></a><span class="p">(</span><span class="s1">&#39;n/a&#39;</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">)</span>

<span class="c1"># Remember that there is a convenient JavaScript tool to validate all your BIDS</span>
<span class="c1"># directories called the &quot;BIDS-validator&quot;, available as a web version and a</span>
<span class="c1"># command line tool:</span>
<span class="c1">#</span>
<span class="c1"># Web version: https://bids-standard.github.io/bids-validator/</span>
<span class="c1">#</span>
<span class="c1"># Command line tool: https://www.npmjs.com/package/bids-validator</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>sub-1/ieeg/sub-1_task-motor_ieeg.json
    7        &quot;SoftwareFilters&quot;: &quot;n/a&quot;,
    10       &quot;iEEGReference&quot;: &quot;n/a&quot;,
participants.tsv
    1    participa age       sex       hand
    2    sub-1     n/a       n/a       n/a
sub-1/ieeg/sub-1_space-ACPC_electrodes.tsv
    1    name      x         y         z         size
    2    LENT 1    -0.024299 0.0261000 -0.055999 n/a
    3    LENT 2    -0.026333 0.0271111 -0.054501 n/a
    4    LENT 3    -0.029499 0.0287999 -0.052000 n/a
    5    LENT 4    -0.032333 0.0301111 -0.050222 n/a
    6    LENT 5    -0.034800 0.0309000 -0.048499 n/a
    7    LENT 6    -0.037222 0.0319999 -0.046777 n/a
    8    LENT 7    -0.039955 0.0327777 -0.044408 n/a
    9    LAMY 1    -0.029111 0.0095555 -0.031777 n/a
    10   LAMY 2    -0.033699 0.0101000 -0.031499 n/a
    11   LAMY 3    -0.038636 0.0113636 -0.031181 n/a
    ...
sub-1/ieeg/sub-1_task-motor_channels.tsv
    1    name      type      units     low_cutof high_cuto descripti sampling_ status    status_de
    2    LENT 1    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    3    LENT 2    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    4    LENT 3    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    5    LENT 4    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    6    LENT 5    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    7    LENT 6    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    8    LENT 7    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    9    LAMY 1    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    10   LAMY 2    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    11   LAMY 3    SEEG      V         0.0       499.70605 StereoEEG 999.41210 good      n/a
    ...
</pre></div>
</div>
</section>
<section id="step-3-load-channels-from-bids-formatted-dataset-and-compare">
<h2>Step 3: Load channels from BIDS-formatted dataset and compare<a class="headerlink" href="#step-3-load-channels-from-bids-formatted-dataset-and-compare" title="Permalink to this headline">¶</a></h2>
<p>Now we have written our BIDS directory. We can use
<a class="reference internal" href="../generated/mne_bids.read_raw_bids.html#mne_bids.read_raw_bids" title="mne_bids.read_raw_bids"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_raw_bids()</span></code></a> to read in the data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># read in the BIDS dataset to plot the coordinates</span>
<span class="n">raw</span> <span class="o">=</span> <a href="../generated/mne_bids.read_raw_bids.html#mne_bids.read_raw_bids" title="mne_bids.read_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">read_raw_bids</span></a><span class="p">(</span><a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="o">=</span><a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">)</span>

<span class="c1"># compare with standard</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Recovered coordinate: </span><span class="si">{recovered}</span><span class="se">\n</span><span class="s1">&#39;</span>
      <span class="s1">&#39;Saved coordinate:     </span><span class="si">{saved}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
          <span class="n">recovered</span><span class="o">=</span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;chs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;loc&#39;</span><span class="p">][:</span><span class="mi">3</span><span class="p">],</span>
          <span class="n">saved</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span><span class="o">.</span><span class="n">dig</span></a><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;r&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Extracting parameters from /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_ieeg.vhdr...
Setting channel info structure...
Reading events from /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_events.tsv.
Reading channel info from /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_channels.tsv.
Reading in coordinate system frame ACPC: None.
Reading electrode coords from /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_space-ACPC_electrodes.tsv.
--- Logging error ---
Traceback (most recent call last):
  File &quot;/opt/circleci/.pyenv/versions/3.9.7/lib/python3.9/logging/__init__.py&quot;, line 1083, in emit
    msg = self.format(record)
  File &quot;/opt/circleci/.pyenv/versions/3.9.7/lib/python3.9/logging/__init__.py&quot;, line 927, in format
    return fmt.format(record)
  File &quot;/opt/circleci/.pyenv/versions/3.9.7/lib/python3.9/logging/__init__.py&quot;, line 663, in format
    record.message = record.getMessage()
  File &quot;/opt/circleci/.pyenv/versions/3.9.7/lib/python3.9/logging/__init__.py&quot;, line 367, in getMessage
    msg = msg % self.args
TypeError: not all arguments converted during string formatting
Call stack:
  File &quot;/home/circleci/mne_bids_env/bin/sphinx-build&quot;, line 8, in &lt;module&gt;
    sys.exit(main())
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/build.py&quot;, line 296, in main
    return make_main(argv)
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/build.py&quot;, line 201, in make_main
    return make_mode.run_make_mode(argv[1:])
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/make_mode.py&quot;, line 167, in run_make_mode
    return make.run_generic_build(args[0])
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/make_mode.py&quot;, line 155, in run_generic_build
    return build_main(args + opts)
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/build.py&quot;, line 280, in build_main
    app = Sphinx(args.sourcedir, args.confdir, args.outputdir,
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/application.py&quot;, line 263, in __init__
    self._init_builder()
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/application.py&quot;, line 322, in _init_builder
    self.events.emit(&#39;builder-inited&#39;)
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/events.py&quot;, line 101, in emit
    results.append(listener.handler(self.app, *args))
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_gallery.py&quot;, line 447, in generate_gallery_rst
    this_fhindex, this_costs = generate_dir_rst(
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 381, in generate_dir_rst
    intro, title, cost = generate_file_rst(
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 933, in generate_file_rst
    output_blocks, time_elapsed = execute_script(script_blocks,
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 852, in execute_script
    output_blocks.append(execute_code_block(
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 720, in execute_code_block
    is_last_expr, mem_max = _exec_and_get_memory(
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 577, in _exec_and_get_memory
    mem_body, _ = gallery_conf[&#39;call_memory&#39;](
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_gallery.py&quot;, line 207, in call_memory
    return 0., func()
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 516, in __call__
    exec(self.code, self.fake_main.__dict__)
  File &quot;/home/circleci/project/examples/convert_ieeg_to_bids.py&quot;, line 232, in &lt;module&gt;
    raw = read_raw_bids(bids_path=bids_path)
  File &quot;&lt;decorator-gen-576&gt;&quot;, line 12, in read_raw_bids
  File &quot;/home/circleci/project/mne_bids/read.py&quot;, line 724, in read_raw_bids
    _read_dig_bids(electrodes_fname, coordsystem_fname,
  File &quot;/home/circleci/project/mne_bids/dig.py&quot;, line 519, in _read_dig_bids
    montage = _handle_electrodes_reading(electrodes_fpath, coord_frame,
  File &quot;/home/circleci/project/mne_bids/dig.py&quot;, line 42, in _handle_electrodes_reading
    logger.info(&quot;The read in electrodes file is: \n&quot;, summary_str)
Message: &#39;The read in electrodes file is: \n&#39;
Arguments: ([(&#39;name&#39;, [&#39;LENT 1&#39;, &#39;LENT 2&#39;, &#39;LENT 3&#39;, &#39;LENT 4&#39;, &#39;LENT 5&#39;, &#39;LENT 6&#39;, &#39;LENT 7&#39;, &#39;LAMY 1&#39;, &#39;LAMY 2&#39;, &#39;LAMY 3&#39;, &#39;LAMY 4&#39;, &#39;LAMY 5&#39;, &#39;LAMY 6&#39;, &#39;LAMY 7&#39;, &#39;LPHG 1&#39;, &#39;LPHG 2&#39;, &#39;LPHG 3&#39;, &#39;LPHG 4&#39;, &#39;LPHG 5&#39;, &#39;LPHG 6&#39;, &#39;LPHG 7&#39;, &#39;LPLI 1&#39;, &#39;LPLI 2&#39;, &#39;LPLI 3&#39;, &#39;LPLI 4&#39;, &#39;LPLI 5&#39;, &#39;LPLI 6&#39;, &#39;LPLI 7&#39;, &#39;LPLI 8&#39;, &#39;LPLI 9&#39;, &#39;LSTG 1&#39;, &#39;LSTG 2&#39;, &#39;LSTG 3&#39;, &#39;LSTG 4&#39;, &#39;LPIT 1&#39;, &#39;LPIT 2&#39;, &#39;LPIT 3&#39;, &#39;LPIT 4&#39;, &#39;LPIT 5&#39;, &#39;LPIT 6&#39;, &#39;LPIT 7&#39;, &#39;LTPO 3&#39;, &#39;LTPO 4&#39;, &#39;LTPO 5&#39;, &#39;LTPO 6&#39;, &#39;LTPO 7&#39;, &#39;LTPO 8&#39;, &#39;LBRI 1&#39;, &#39;LBRI 2&#39;, &#39;LBRI 3&#39;, &#39;LBRI 4&#39;, &#39;LBRI 5&#39;, &#39;LBRI 6&#39;, &#39;LBRI 7&#39;, &#39;LBRI 8&#39;, &#39;LACN 1&#39;, &#39;LACN 2&#39;, &#39;LACN 3&#39;, &#39;LACN 4&#39;, &#39;LACN 5&#39;, &#39;LACN 6&#39;, &#39;LACN 7&#39;, &#39;LACN 8&#39;, &#39;LOFC 1&#39;, &#39;LOFC 2&#39;, &#39;LOFC 3&#39;, &#39;LOFC 4&#39;, &#39;LOFC 5&#39;, &#39;LOFC 6&#39;, &#39;LOFC 7&#39;, &#39;LOFC 8&#39;, &#39;LOFC 9&#39;, &#39;LPCN 1&#39;, &#39;LPCN 2&#39;, &#39;LPCN 3&#39;, &#39;LPCN 4&#39;, &#39;LPCN 5&#39;, &#39;LPCN 6&#39;, &#39;LPCN 7&#39;, &#39;LSMA 1&#39;, &#39;LSMA 2&#39;, &#39;LSMA 3&#39;, &#39;LSMA 4&#39;, &#39;LSMA 5&#39;, &#39;LSMA 6&#39;, &#39;LSMA 7&#39;, &#39;LSMA 8&#39;, &#39;LSMA 9&#39;, &#39;LSMA 10&#39;, &#39;LSMA 11&#39;, &#39;LSMA 12&#39;, &#39;LSMA 13&#39;, &#39;LSMA 14&#39;, &#39;LSMA 15&#39;, &#39;LSMA 16&#39;, &#39;LPM 1&#39;, &#39;LPM 2&#39;, &#39;LPM 3&#39;, &#39;LPM 5&#39;, &#39;LPM 6&#39;, &#39;LPM 7&#39;, &#39;LPM 8&#39;, &#39;LPM 9&#39;, &#39;LPM 10&#39;, &#39;RAHP 1&#39;, &#39;RAHP 2&#39;, &#39;RAHP 3&#39;, &#39;RAHP 4&#39;, &#39;RAHP 5&#39;, &#39;RAHP 6&#39;, &#39;RAHP 7&#39;, &#39;RAHP 8&#39;, &#39;RPHP 1&#39;, &#39;RPHP 2&#39;, &#39;RPHP 3&#39;, &#39;RPHP 4&#39;, &#39;RPHP 5&#39;, &#39;RPHP 6&#39;, &#39;RPHP 8&#39;]), (&#39;x&#39;, [&#39;-0.024299999882191146&#39;, &#39;-0.026333333104779033&#39;, &#39;-0.029499999335220604&#39;, &#39;-0.03233333316468336&#39;, &#39;-0.034800000710160664&#39;, &#39;-0.037222221420963576&#39;, &#39;-0.03995555733302174&#39;, &#39;-0.02911111162825681&#39;, &#39;-0.03369999875821255&#39;, &#39;-0.03863636330106878&#39;, &#39;-0.044111110610851025&#39;, &#39;-0.04910000158453417&#39;, &#39;-0.05509999821410432&#39;, &#39;-0.06085713921358042&#39;, &#39;-0.03588889030183063&#39;, &#39;-0.04271428392131963&#39;, &#39;-0.048888890475827014&#39;, &#39;-0.05588888939857391&#39;, &#39;-0.06200000085088368&#39;, &#39;-0.06859999899873996&#39;, &#39;-0.07255984499528893&#39;, &#39;-0.03727272871864064&#39;, &#39;-0.04049999965314151&#39;, &#39;-0.04390000021908837&#39;, &#39;-0.04709091084904533&#39;, &#39;-0.050699999447783056&#39;, &#39;-0.05455555670977703&#39;, &#39;-0.05770000059178943&#39;, &#39;-0.061300000166289975&#39;, &#39;-0.06450000251580887&#39;, &#39;-0.03833333153077167&#39;, &#39;-0.0420000018117685&#39;, &#39;-0.04499999882985546&#39;, &#39;-0.048272727614594085&#39;, &#39;-0.02872727256739837&#39;, &#39;-0.03266666785746726&#39;, &#39;-0.038000000290975756&#39;, &#39;-0.04300000101221667&#39;, &#39;-0.04841666500366202&#39;, &#39;-0.053600000654716255&#39;, &#39;-0.05899999830199016&#39;, &#39;-0.04283333460949099&#39;, &#39;-0.04579999849751943&#39;, &#39;-0.048909090700501145&#39;, &#39;-0.052333333346339266&#39;, &#39;-0.05579999826770925&#39;, &#39;-0.05899999888471112&#39;, &#39;-0.026475214352481857&#39;, &#39;-0.029908604205167402&#39;, &#39;-0.03349004816553985&#39;, &#39;-0.03669502417835313&#39;, &#39;-0.04088888783983187&#39;, &#39;-0.04387499947223597&#39;, &#39;-0.04749999976098824&#39;, &#39;-0.050777776563195355&#39;, &#39;-0.007999999641204217&#39;, &#39;-0.014111110263399843&#39;, &#39;-0.019999999563215694&#39;, &#39;-0.02669999917722429&#39;, &#39;-0.033777779035282805&#39;, &#39;-0.03988888741652198&#39;, &#39;-0.046799999089319436&#39;, &#39;-0.055090907776706444&#39;, &#39;-0.018499999279026656&#39;, &#39;-0.022999999248653192&#39;, &#39;-0.029200000826516248&#39;, &#39;-0.033888890130068905&#39;, &#39;-0.039399999100188716&#39;, &#39;-0.04322222348544918&#39;, &#39;-0.04811111279118807&#39;, &#39;-0.05222222268407905&#39;, &#39;-0.05709999827845647&#39;, &#39;-0.013999999561457116&#39;, &#39;-0.01963636352171578&#39;, &#39;-0.025499999944969726&#39;, &#39;-0.03189999976198406&#39;, &#39;-0.03799999870917839&#39;, &#39;-0.045000001209483394&#39;, &#39;-0.05044444411978344&#39;, &#39;-0.03422222045154909&#39;, &#39;-0.03412500168323115&#39;, &#39;-0.032333332423068004&#39;, &#39;-0.031000001110408383&#39;, &#39;-0.03044444540711245&#39;, &#39;-0.029700001627495455&#39;, &#39;-0.02866666738520295&#39;, &#39;-0.0281111110346892&#39;, &#39;-0.020999999883576138&#39;, &#39;-0.01989999988801092&#39;, &#39;-0.018700000367011027&#39;, &#39;-0.017799999645472346&#39;, &#39;-0.0170909096652889&#39;, &#39;-0.01655555508579334&#39;, &#39;-0.015111110416597406&#39;, &#39;-0.015000000122794604&#39;, &#39;-0.02999999971687395&#39;, &#39;-0.032000000019973426&#39;, &#39;-0.03355555659594103&#39;, &#39;-0.037000001700679686&#39;, &#39;-0.04010000114982487&#39;, &#39;-0.04311110944729015&#39;, &#39;-0.04416666728935881&#39;, &#39;-0.04554545628108573&#39;, &#39;-0.04723333518207441&#39;, &#39;0.017300000106759514&#39;, &#39;0.02188888797404015&#39;, &#39;0.027000000705939414&#39;, &#39;0.03190000069215284&#39;, &#39;0.03688888703209712&#39;, &#39;0.042500001021112906&#39;, &#39;0.04799999903754554&#39;, &#39;0.0528888893587579&#39;, &#39;0.01509090873744214&#39;, &#39;0.02119999985583394&#39;, &#39;0.028199999202244856&#39;, &#39;0.03542857087120939&#39;, &#39;0.042400000309896636&#39;, &#39;0.04966666816729859&#39;, &#39;0.06377777729320894&#39;]), (&#39;y&#39;, [&#39;0.026100000569330768&#39;, &#39;0.02711111041783227&#39;, &#39;0.02879999917295631&#39;, &#39;0.03011111031629913&#39;, &#39;0.03090000145109586&#39;, &#39;0.031999998824647234&#39;, &#39;0.03277777894353416&#39;, &#39;0.009555554869889314&#39;, &#39;0.010100000470660904&#39;, &#39;0.011363636944289483&#39;, &#39;0.012000000453194836&#39;, &#39;0.013299999828236129&#39;, &#39;0.014100000890876131&#39;, &#39;0.014571428463699052&#39;, &#39;-0.006222222189909598&#39;, &#39;-0.007999999935172575&#39;, &#39;-0.009555555474586433&#39;, &#39;-0.012333333343858558&#39;, &#39;-0.014555555532939116&#39;, &#39;-0.016100000152251312&#39;, &#39;-0.0177830706331854&#39;, &#39;0.008727273589759891&#39;, &#39;0.007800000838469847&#39;, &#39;0.007799999468229589&#39;, &#39;0.007454546412764714&#39;, &#39;0.006900000649951991&#39;, &#39;0.0061111116126119636&#39;, &#39;0.006100000350932753&#39;, &#39;0.0060000002079887635&#39;, &#39;0.005500000053004151&#39;, &#39;-0.024666667220420525&#39;, &#39;-0.024333333457081812&#39;, &#39;-0.023999999566425952&#39;, &#39;-0.024000000210152615&#39;, &#39;-0.021818181807756087&#39;, &#39;-0.02299999996610265&#39;, &#39;-0.02409999982053179&#39;, &#39;-0.025333333506411385&#39;, &#39;-0.026916667276272982&#39;, &#39;-0.027999999570054862&#39;, &#39;-0.02966666649930827&#39;, &#39;-0.038833333336420126&#39;, &#39;-0.040399999913512355&#39;, &#39;-0.041636363562717466&#39;, &#39;-0.04255555568850993&#39;, &#39;-0.04309999905641573&#39;, &#39;-0.04463636309358276&#39;, &#39;0.022777777701310446&#39;, &#39;0.022777452044812872&#39;, &#39;0.02306618324546316&#39;, &#39;0.023015514620540793&#39;, &#39;0.02333333253091968&#39;, &#39;0.02300000155403975&#39;, &#39;0.023900000592756612&#39;, &#39;0.02411111131309377&#39;, &#39;0.01709999955483449&#39;, &#39;0.01833333467232098&#39;, &#39;0.02080000028634929&#39;, &#39;0.022999998192130167&#39;, &#39;0.025333333104252967&#39;, &#39;0.028222220642418187&#39;, &#39;0.03020000037696042&#39;, &#39;0.031454547327689174&#39;, &#39;0.06689999819322551&#39;, &#39;0.0643000008574873&#39;, &#39;0.05969999969449861&#39;, &#39;0.05500000261580213&#39;, &#39;0.05109999844993053&#39;, &#39;0.04688889214065941&#39;, &#39;0.04211110815234412&#39;, &#39;0.03811110744442094&#39;, &#39;0.03409999951363634&#39;, &#39;-0.03929999928672145&#39;, &#39;-0.04218181814240653&#39;, &#39;-0.045833334381780506&#39;, &#39;-0.04930000054729992&#39;, &#39;-0.052555555626968675&#39;, &#39;-0.05622222294774318&#39;, &#39;-0.05955555554956268&#39;, &#39;0.016888887379338455&#39;, &#39;0.01712500098729449&#39;, &#39;0.01733333147370198&#39;, &#39;0.017099997762264507&#39;, &#39;0.01722222120092591&#39;, &#39;0.01709999936402537&#39;, &#39;0.017111111194514805&#39;, &#39;0.016777777090574358&#39;, &#39;0.016444446863045813&#39;, &#39;0.01630000150081693&#39;, &#39;0.015999999016405864&#39;, &#39;0.0161999996137319&#39;, &#39;0.015727274436139808&#39;, &#39;0.015888889874310325&#39;, &#39;0.015999998930424718&#39;, &#39;0.01509090880838996&#39;, &#39;-0.00044444303146437894&#39;, &#39;-0.00016666714530336538&#39;, &#39;0.0008888888078755451&#39;, &#39;0.001111112967201528&#39;, &#39;0.0018999988824567222&#39;, &#39;0.002888890222141831&#39;, &#39;0.003083332502528322&#39;, &#39;0.0037272706617296376&#39;, &#39;0.004100001694158511&#39;, &#39;-0.0011000003662318784&#39;, &#39;0.0005555559568463653&#39;, &#39;0.0016666665862043219&#39;, &#39;0.002800000699788023&#39;, &#39;0.004000000489196659&#39;, &#39;0.004999999833212435&#39;, &#39;0.005699999648874292&#39;, &#39;0.006999999991566381&#39;, &#39;-0.01945454564465711&#39;, &#39;-0.019499999977674216&#39;, &#39;-0.020000000127331337&#39;, &#39;-0.020571428569710365&#39;, &#39;-0.02110000018953696&#39;, &#39;-0.021166666605042177&#39;, &#39;-0.02277777780597981&#39;]), (&#39;z&#39;, [&#39;-0.05599999973516251&#39;, &#39;-0.054501502018083486&#39;, &#39;-0.05200000007140222&#39;, &#39;-0.05022222264468077&#39;, &#39;-0.04849999954763293&#39;, &#39;-0.04677777808705062&#39;, &#39;-0.044408408211422216&#39;, &#39;-0.03177777834838271&#39;, &#39;-0.031499998943250763&#39;, &#39;-0.031181818149092617&#39;, &#39;-0.030888889246147612&#39;, &#39;-0.031000000427943833&#39;, &#39;-0.03030000040202633&#39;, &#39;-0.030571427888510146&#39;, &#39;-0.03411111072032755&#39;, &#39;-0.03442857077548962&#39;, &#39;-0.033666666597853986&#39;, &#39;-0.032333333271199576&#39;, &#39;-0.02955555580891328&#39;, &#39;-0.02699999946520054&#39;, &#39;-0.0250165310272801&#39;, &#39;-0.024272727429326735&#39;, &#39;-0.023999999582187473&#39;, &#39;-0.02419999942907739&#39;, &#39;-0.023727273172821355&#39;, &#39;-0.023699998897917234&#39;, &#39;-0.02322222166322611&#39;, &#39;-0.023300000406836132&#39;, &#39;-0.02289999907469964&#39;, &#39;-0.02260000053306984&#39;, &#39;-0.02377777602412823&#39;, &#39;-0.021999999998977636&#39;, &#39;-0.02085714360828004&#39;, &#39;-0.019636362826393014&#39;, &#39;-0.03463636414910813&#39;, &#39;-0.03411111158520931&#39;, &#39;-0.033499999954334184&#39;, &#39;-0.03322222284765333&#39;, &#39;-0.033083332630675824&#39;, &#39;-0.03289999999155021&#39;, &#39;-0.03222222235987605&#39;, &#39;-0.004500000986147681&#39;, &#39;-0.004300000392791291&#39;, &#39;-0.0041818185908553615&#39;, &#39;-0.004222223122070538&#39;, &#39;-0.004399999939586077&#39;, &#39;-0.004090908435151898&#39;, &#39;-0.006726726345637479&#39;, &#39;-0.0053976567767587275&#39;, &#39;-0.005229775782218074&#39;, &#39;-0.004834376859873063&#39;, &#39;-0.003777777867858642&#39;, &#39;-0.003124999085773336&#39;, &#39;-0.001900001330390949&#39;, &#39;-0.0012222209840609954&#39;, &#39;0.012500000076540327&#39;, &#39;0.014111113306733841&#39;, &#39;0.015799999316332747&#39;, &#39;0.01790000092526993&#39;, &#39;0.019666666556448248&#39;, &#39;0.021111111937582264&#39;, &#39;0.023100001365817885&#39;, &#39;0.024363634226044387&#39;, &#39;-0.008899999538957037&#39;, &#39;-0.008099999073276618&#39;, &#39;-0.006800000139898774&#39;, &#39;-0.005111110097082559&#39;, &#39;-0.0029000022285921995&#39;, &#39;0.0010000015356187233&#39;, &#39;0.004888889783726438&#39;, &#39;0.008111111813010677&#39;, &#39;0.012399998427868889&#39;, &#39;-0.009900001139670378&#39;, &#39;-0.009909092282012685&#39;, &#39;-0.010083331726425983&#39;, &#39;-0.010299999140778997&#39;, &#39;-0.01033333300129749&#39;, &#39;-0.01044444459102313&#39;, &#39;-0.010333334366077432&#39;, &#39;-0.02300000112814219&#39;, &#39;-0.021124999854839725&#39;, &#39;-0.01733333341750562&#39;, &#39;-0.012999998686169821&#39;, &#39;-0.010222224400544308&#39;, &#39;-0.006799999313836597&#39;, &#39;-0.003666667239758045&#39;, &#39;0.00044444365596097574&#39;, &#39;0.02788888699796775&#39;, &#39;0.03199999941427052&#39;, &#39;0.03619999972333955&#39;, &#39;0.039100003474433195&#39;, &#39;0.041818181384180836&#39;, &#39;0.04611111220720475&#39;, &#39;0.050000003565436546&#39;, &#39;0.05254545425137738&#39;, &#39;0.0161111089750767&#39;, &#39;0.01833333612131828&#39;, &#39;0.02077777546052742&#39;, &#39;0.025444441355561925&#39;, &#39;0.029599999532890622&#39;, &#39;0.033444445829329164&#39;, &#39;0.035166665011990256&#39;, &#39;0.03772727410737402&#39;, &#39;0.04011711509875188&#39;, &#39;-0.03550000032253288&#39;, &#39;-0.03666666669104199&#39;, &#39;-0.03722222182157961&#39;, &#39;-0.0380999994132359&#39;, &#39;-0.038999999444595125&#39;, &#39;-0.03999999983631346&#39;, &#39;-0.04089999987812269&#39;, &#39;-0.04144444447863954&#39;, &#39;-0.03199999950126767&#39;, &#39;-0.03110000028481771&#39;, &#39;-0.030199999436887767&#39;, &#39;-0.02957142821451967&#39;, &#39;-0.028599999178362395&#39;, &#39;-0.0273333337256656&#39;, &#39;-0.026111111402001123&#39;]), (&#39;size&#39;, [&#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;])],)
/home/circleci/project/mne_bids/dig.py:539: RuntimeWarning: Fiducial point nasion not found, assuming identity unknown to head transformation
  raw.set_montage(montage, on_missing=&#39;warn&#39;)
Recovered coordinate: [-0.0243  0.0261 -0.056 ]
Saved coordinate:     [-0.0243  0.0261 -0.056 ]
</pre></div>
</div>
<p>Now we have to go back to “head” coordinates with the head-&gt;mri transform.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you were downloading this from <code class="docutils literal notranslate"><span class="pre">OpenNeuro</span></code>, you would
have to run the Freesurfer <code class="docutils literal notranslate"><span class="pre">recon-all</span></code> to get the transforms.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.get_montage" title="mne.io.BaseRaw.get_montage" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">get_montage</span></a><span class="p">()</span>
<span class="c1"># this uses Freesurfer recon-all subject directory</span>
<a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage.add_estimated_fiducials" title="mne.channels.DigMontage.add_estimated_fiducials" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-method"><span class="n">montage</span><span class="o">.</span><span class="n">add_estimated_fiducials</span></a><span class="p">(</span><span class="s1">&#39;sample_seeg&#39;</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a><span class="p">)</span>
<span class="c1"># now the montage is properly in &quot;head&quot; and ready for analysis in MNE</span>
<a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.set_montage" title="mne.io.BaseRaw.set_montage" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span></a><span class="p">(</span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a><span class="p">)</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<table class="table table-hover table-striped table-sm table-responsive small">
    <tr>
        <th>Measurement date</th>

        <td>August 29, 1937  11:09:44 GMT</td>

    </tr>
    <tr>
        <th>Experimenter</th>

        <td>mne_anonymize</td>

    </tr>
        <th>Participant</th>


            <td>sub-1</td>


    </tr>
    <tr>
        <th>Digitized points</th>

        <td>0 points</td>

    </tr>
    <tr>
        <th>Good channels</th>
        <td>119 sEEG</td>
    </tr>
    <tr>
        <th>Bad channels</th>
        <td>None</td>
    </tr>
    <tr>
        <th>EOG channels</th>
        <td>Not available</td>
    </tr>
    <tr>
        <th>ECG channels</th>
        <td>Not available</td>

    <tr>
        <th>Sampling frequency</th>
        <td>999.41 Hz</td>
    </tr>


    <tr>
        <th>Highpass</th>
        <td>0.00 Hz</td>
    </tr>


    <tr>
        <th>Lowpass</th>
        <td>499.71 Hz</td>
    </tr>



    <tr>
        <th>Filenames</th>
        <td>sub-1_task-motor_ieeg.eeg</td>
    </tr>

    <tr>
        <th>Duration</th>
        <td>00:01:00 (HH:MM:SS)</td>
    </tr>
</table>
</div>
<br />
<br /></section>
<section id="step-4-cite-mne-bids">
<h2>Step 4: Cite mne-bids<a class="headerlink" href="#step-4-cite-mne-bids" title="Permalink to this headline">¶</a></h2>
<p>We can see that the appropriate citations are already written in the README.
If you are preparing a manuscript, please make sure to also cite MNE-BIDS
there.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">readme</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">,</span> <span class="s1">&#39;README&#39;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">readme</span></a><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8-sig&#39;</span><span class="p">)</span> <span class="k">as</span> <a href="https://docs.python.org/3/library/io.html#io.TextIOWrapper" title="io.TextIOWrapper" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fid</span></a><span class="p">:</span>
    <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">text</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/io.html#io.TextIOWrapper" title="io.TextIOWrapper" class="sphx-glr-backref-module-io sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fid</span></a><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">text</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>References
----------
Appelhoff, S., Sanderson, M., Brooks, T., Vliet, M., Quentin, R., Holdgraf, C., Chaumon, M., Mikulan, E., Tavabi, K., Höchenberger, R., Welke, D., Brunner, C., Rockhill, A., Larson, E., Gramfort, A. and Jas, M. (2019). MNE-BIDS: Organizing electrophysiological data into the BIDS format and facilitating their analysis. Journal of Open Source Software 4: (1896). https://doi.org/10.21105/joss.01896

Holdgraf, C., Appelhoff, S., Bickel, S., Bouchard, K., D&#39;Ambrosio, S., David, O., … Hermes, D. (2019). iEEG-BIDS, extending the Brain Imaging Data Structure specification to human intracranial electrophysiology. Scientific Data, 6, 102. https://doi.org/10.1038/s41597-019-0105-7
</pre></div>
</div>
</section>
<section id="step-5-store-coordinates-in-a-template-space">
<h2>Step 5: Store coordinates in a template space<a class="headerlink" href="#step-5-store-coordinates-in-a-template-space" title="Permalink to this headline">¶</a></h2>
<p>Alternatively, if your T1 is not aligned to ACPC-space or you prefer to
store the coordinates in a template space (e.g. <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code>) for another
reason, you can also do that.</p>
<p>Here we’ll use the MNI Talairach transform to get to <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code> space
from “mri” aka surface RAS space.
<code class="docutils literal notranslate"><span class="pre">fsaverage</span></code> is very useful for group analysis as shown in
<a class="reference external" href="https://mne.tools/stable/auto_tutorials/misc/plot_seeg.html">Working with SEEG</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ensure the output path doesn&#39;t contain any leftover files from previous</span>
<span class="c1"># tests and example runs</span>
<span class="k">if</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.exists" title="os.path.exists" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">exists</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">):</span>
    <a href="https://docs.python.org/3/library/shutil.html#shutil.rmtree" title="shutil.rmtree" class="sphx-glr-backref-module-shutil sphx-glr-backref-type-py-function"><span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_root</span></a><span class="p">)</span>

<span class="c1"># load our raw data again</span>
<span class="n">raw</span> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.io.read_raw_fif.html#mne.io.read_raw_fif" title="mne.io.read_raw_fif" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">read_raw_fif</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">op</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span>
    <span class="n">misc_path</span><span class="p">,</span> <span class="s1">&#39;seeg&#39;</span><span class="p">,</span> <span class="s1">&#39;sample_seeg_ieeg.fif&#39;</span><span class="p">))</span>
<a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;line_freq&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">60</span>  <span class="c1"># specify power line frequency as required by BIDS</span>

<span class="c1"># get Talairach transform</span>
<a href="https://mne.tools/dev/generated/mne.transforms.Transform.html#mne.transforms.Transform" title="mne.transforms.Transform" class="sphx-glr-backref-module-mne-transforms sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">mri_mni_t</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.read_talxfm.html#mne.read_talxfm" title="mne.read_talxfm" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">read_talxfm</span></a><span class="p">(</span><span class="s1">&#39;sample_seeg&#39;</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Opening raw data file /home/circleci/mne_data/MNE-misc-data/seeg/sample_seeg_ieeg.fif...
    Range : 1310640 ... 1370605 =   1311.411 ...  1371.411 secs
Ready.
</pre></div>
</div>
<p>Now let’s convert the montage to MNI Talairach (“mni_tal”).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.get_montage" title="mne.io.BaseRaw.get_montage" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">get_montage</span></a><span class="p">()</span>
<a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage.apply_trans" title="mne.channels.DigMontage.apply_trans" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-method"><span class="n">montage</span><span class="o">.</span><span class="n">apply_trans</span></a><span class="p">(</span><a href="https://mne.tools/dev/generated/mne.transforms.Transform.html#mne.transforms.Transform" title="mne.transforms.Transform" class="sphx-glr-backref-module-mne-transforms sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">trans</span></a><span class="p">)</span>  <span class="c1"># head-&gt;mri</span>
<a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage.apply_trans" title="mne.channels.DigMontage.apply_trans" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-method"><span class="n">montage</span><span class="o">.</span><span class="n">apply_trans</span></a><span class="p">(</span><a href="https://mne.tools/dev/generated/mne.transforms.Transform.html#mne.transforms.Transform" title="mne.transforms.Transform" class="sphx-glr-backref-module-mne-transforms sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">mri_mni_t</span></a><span class="p">)</span>

<span class="c1"># write to BIDS, this time with a template coordinate system</span>
<a href="../generated/mne_bids.write_raw_bids.html#mne_bids.write_raw_bids" title="mne_bids.write_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">write_raw_bids</span></a><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">,</span> <span class="n">anonymize</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">daysback</span><span class="o">=</span><span class="mi">30000</span><span class="p">),</span>
               <a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a><span class="o">=</span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># read in the BIDS dataset</span>
<span class="n">raw</span> <span class="o">=</span> <a href="../generated/mne_bids.read_raw_bids.html#mne_bids.read_raw_bids" title="mne_bids.read_raw_bids" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-function"><span class="n">read_raw_bids</span></a><span class="p">(</span><a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="o">=</span><a href="../generated/mne_bids.BIDSPath.html#mne_bids.BIDSPath" title="mne_bids.BIDSPath" class="sphx-glr-backref-module-mne_bids sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">bids_path</span></a><span class="p">)</span>

<span class="c1"># check that we can recover the coordinates</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Recovered coordinate: </span><span class="si">{recovered}</span><span class="se">\n</span><span class="s1">&#39;</span>
      <span class="s1">&#39;Saved coordinate:     </span><span class="si">{saved}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
          <span class="n">recovered</span><span class="o">=</span><a href="https://mne.tools/dev/generated/mne.Info.html#mne.Info" title="mne.Info" class="sphx-glr-backref-module-mne sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">raw</span><span class="o">.</span><span class="n">info</span></a><span class="p">[</span><span class="s1">&#39;chs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;loc&#39;</span><span class="p">][:</span><span class="mi">3</span><span class="p">],</span>
          <span class="n">saved</span><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span><span class="o">.</span><span class="n">dig</span></a><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;r&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Opening raw data file /home/circleci/mne_data/MNE-misc-data/seeg/sample_seeg_ieeg.fif...
    Range : 1310640 ... 1370605 =   1311.411 ...  1371.411 secs
Ready.
/home/circleci/project/mne_bids/utils.py:325: RuntimeWarning: `daysback` is too small; the measurement date is after 1925, which is not recommended by BIDS.The minimum `daysback` value for changing the measurement date of this data to before this date is 34624
  warn(&#39;`daysback` is too small; the measurement date &#39;
/home/circleci/project/mne_bids/write.py:1525: RuntimeWarning: Converting data files to BrainVision format for anonymization
  warn(&#39;Converting data files to BrainVision format &#39;
Writing &#39;/home/circleci/mne_data/ieeg_bids/README&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/participants.tsv&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/participants.json&#39;...
/home/circleci/project/mne_bids/dig.py:339: RuntimeWarning: Fiducial point nasion not found, assuming identity unknown to head transformation
  raw.set_montage(montage)
Writing electrodes file to... /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_electrodes.tsv
Writing coordsytem file to... /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_coordsystem.json
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_space-fsaverage_electrodes.tsv&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_space-fsaverage_coordsystem.json&#39;...
Used Annotations descriptions: [&#39;Fixation&#39;, &#39;Go Cue&#39;, &#39;ISI Onset&#39;, &#39;Response&#39;]
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_events.tsv&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/dataset_description.json&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_ieeg.json&#39;...
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_channels.tsv&#39;...
/home/circleci/project/mne_bids/write.py:1657: RuntimeWarning: Converting data files to BrainVision format
  warn(&#39;Converting data files to BrainVision format&#39;)
Writing &#39;/home/circleci/mne_data/ieeg_bids/sub-1/sub-1_scans.tsv&#39;...
Wrote /home/circleci/mne_data/ieeg_bids/sub-1/sub-1_scans.tsv entry with ieeg/sub-1_task-motor_ieeg.vhdr.
Extracting parameters from /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_ieeg.vhdr...
Setting channel info structure...
Reading events from /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_events.tsv.
Reading channel info from /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_task-motor_channels.tsv.
Reading in coordinate system frame fsaverage: None.
Reading electrode coords from /home/circleci/mne_data/ieeg_bids/sub-1/ieeg/sub-1_space-fsaverage_electrodes.tsv.
--- Logging error ---
Traceback (most recent call last):
  File &quot;/opt/circleci/.pyenv/versions/3.9.7/lib/python3.9/logging/__init__.py&quot;, line 1083, in emit
    msg = self.format(record)
  File &quot;/opt/circleci/.pyenv/versions/3.9.7/lib/python3.9/logging/__init__.py&quot;, line 927, in format
    return fmt.format(record)
  File &quot;/opt/circleci/.pyenv/versions/3.9.7/lib/python3.9/logging/__init__.py&quot;, line 663, in format
    record.message = record.getMessage()
  File &quot;/opt/circleci/.pyenv/versions/3.9.7/lib/python3.9/logging/__init__.py&quot;, line 367, in getMessage
    msg = msg % self.args
TypeError: not all arguments converted during string formatting
Call stack:
  File &quot;/home/circleci/mne_bids_env/bin/sphinx-build&quot;, line 8, in &lt;module&gt;
    sys.exit(main())
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/build.py&quot;, line 296, in main
    return make_main(argv)
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/build.py&quot;, line 201, in make_main
    return make_mode.run_make_mode(argv[1:])
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/make_mode.py&quot;, line 167, in run_make_mode
    return make.run_generic_build(args[0])
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/make_mode.py&quot;, line 155, in run_generic_build
    return build_main(args + opts)
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/cmd/build.py&quot;, line 280, in build_main
    app = Sphinx(args.sourcedir, args.confdir, args.outputdir,
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/application.py&quot;, line 263, in __init__
    self._init_builder()
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/application.py&quot;, line 322, in _init_builder
    self.events.emit(&#39;builder-inited&#39;)
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx/events.py&quot;, line 101, in emit
    results.append(listener.handler(self.app, *args))
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_gallery.py&quot;, line 447, in generate_gallery_rst
    this_fhindex, this_costs = generate_dir_rst(
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 381, in generate_dir_rst
    intro, title, cost = generate_file_rst(
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 933, in generate_file_rst
    output_blocks, time_elapsed = execute_script(script_blocks,
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 852, in execute_script
    output_blocks.append(execute_code_block(
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 720, in execute_code_block
    is_last_expr, mem_max = _exec_and_get_memory(
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 577, in _exec_and_get_memory
    mem_body, _ = gallery_conf[&#39;call_memory&#39;](
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_gallery.py&quot;, line 207, in call_memory
    return 0., func()
  File &quot;/home/circleci/mne_bids_env/lib/python3.9/site-packages/sphinx_gallery/gen_rst.py&quot;, line 516, in __call__
    exec(self.code, self.fake_main.__dict__)
  File &quot;/home/circleci/project/examples/convert_ieeg_to_bids.py&quot;, line 300, in &lt;module&gt;
    raw = read_raw_bids(bids_path=bids_path)
  File &quot;&lt;decorator-gen-576&gt;&quot;, line 12, in read_raw_bids
  File &quot;/home/circleci/project/mne_bids/read.py&quot;, line 724, in read_raw_bids
    _read_dig_bids(electrodes_fname, coordsystem_fname,
  File &quot;/home/circleci/project/mne_bids/dig.py&quot;, line 519, in _read_dig_bids
    montage = _handle_electrodes_reading(electrodes_fpath, coord_frame,
  File &quot;/home/circleci/project/mne_bids/dig.py&quot;, line 42, in _handle_electrodes_reading
    logger.info(&quot;The read in electrodes file is: \n&quot;, summary_str)
Message: &#39;The read in electrodes file is: \n&#39;
Arguments: ([(&#39;name&#39;, [&#39;LENT 1&#39;, &#39;LENT 2&#39;, &#39;LENT 3&#39;, &#39;LENT 4&#39;, &#39;LENT 5&#39;, &#39;LENT 6&#39;, &#39;LENT 7&#39;, &#39;LAMY 1&#39;, &#39;LAMY 2&#39;, &#39;LAMY 3&#39;, &#39;LAMY 4&#39;, &#39;LAMY 5&#39;, &#39;LAMY 6&#39;, &#39;LAMY 7&#39;, &#39;LPHG 1&#39;, &#39;LPHG 2&#39;, &#39;LPHG 3&#39;, &#39;LPHG 4&#39;, &#39;LPHG 5&#39;, &#39;LPHG 6&#39;, &#39;LPHG 7&#39;, &#39;LPLI 1&#39;, &#39;LPLI 2&#39;, &#39;LPLI 3&#39;, &#39;LPLI 4&#39;, &#39;LPLI 5&#39;, &#39;LPLI 6&#39;, &#39;LPLI 7&#39;, &#39;LPLI 8&#39;, &#39;LPLI 9&#39;, &#39;LSTG 1&#39;, &#39;LSTG 2&#39;, &#39;LSTG 3&#39;, &#39;LSTG 4&#39;, &#39;LPIT 1&#39;, &#39;LPIT 2&#39;, &#39;LPIT 3&#39;, &#39;LPIT 4&#39;, &#39;LPIT 5&#39;, &#39;LPIT 6&#39;, &#39;LPIT 7&#39;, &#39;LTPO 3&#39;, &#39;LTPO 4&#39;, &#39;LTPO 5&#39;, &#39;LTPO 6&#39;, &#39;LTPO 7&#39;, &#39;LTPO 8&#39;, &#39;LBRI 1&#39;, &#39;LBRI 2&#39;, &#39;LBRI 3&#39;, &#39;LBRI 4&#39;, &#39;LBRI 5&#39;, &#39;LBRI 6&#39;, &#39;LBRI 7&#39;, &#39;LBRI 8&#39;, &#39;LACN 1&#39;, &#39;LACN 2&#39;, &#39;LACN 3&#39;, &#39;LACN 4&#39;, &#39;LACN 5&#39;, &#39;LACN 6&#39;, &#39;LACN 7&#39;, &#39;LACN 8&#39;, &#39;LOFC 1&#39;, &#39;LOFC 2&#39;, &#39;LOFC 3&#39;, &#39;LOFC 4&#39;, &#39;LOFC 5&#39;, &#39;LOFC 6&#39;, &#39;LOFC 7&#39;, &#39;LOFC 8&#39;, &#39;LOFC 9&#39;, &#39;LPCN 1&#39;, &#39;LPCN 2&#39;, &#39;LPCN 3&#39;, &#39;LPCN 4&#39;, &#39;LPCN 5&#39;, &#39;LPCN 6&#39;, &#39;LPCN 7&#39;, &#39;LSMA 1&#39;, &#39;LSMA 2&#39;, &#39;LSMA 3&#39;, &#39;LSMA 4&#39;, &#39;LSMA 5&#39;, &#39;LSMA 6&#39;, &#39;LSMA 7&#39;, &#39;LSMA 8&#39;, &#39;LSMA 9&#39;, &#39;LSMA 10&#39;, &#39;LSMA 11&#39;, &#39;LSMA 12&#39;, &#39;LSMA 13&#39;, &#39;LSMA 14&#39;, &#39;LSMA 15&#39;, &#39;LSMA 16&#39;, &#39;LPM 1&#39;, &#39;LPM 2&#39;, &#39;LPM 3&#39;, &#39;LPM 5&#39;, &#39;LPM 6&#39;, &#39;LPM 7&#39;, &#39;LPM 8&#39;, &#39;LPM 9&#39;, &#39;LPM 10&#39;, &#39;RAHP 1&#39;, &#39;RAHP 2&#39;, &#39;RAHP 3&#39;, &#39;RAHP 4&#39;, &#39;RAHP 5&#39;, &#39;RAHP 6&#39;, &#39;RAHP 7&#39;, &#39;RAHP 8&#39;, &#39;RPHP 1&#39;, &#39;RPHP 2&#39;, &#39;RPHP 3&#39;, &#39;RPHP 4&#39;, &#39;RPHP 5&#39;, &#39;RPHP 6&#39;, &#39;RPHP 8&#39;]), (&#39;x&#39;, [&#39;-0.023147703651886363&#39;, &#39;-0.025283839857033755&#39;, &#39;-0.028614249041294178&#39;, &#39;-0.03158772841125824&#39;, &#39;-0.034165115736783463&#39;, &#39;-0.03670646385562226&#39;, &#39;-0.03955937066836593&#39;, &#39;-0.027594791235471997&#39;, &#39;-0.03236035538567651&#39;, &#39;-0.03750845772723121&#39;, &#39;-0.04319356988582661&#39;, &#39;-0.04839721798966959&#39;, &#39;-0.054631013836234234&#39;, &#39;-0.060603089996348766&#39;, &#39;-0.034103376629696265&#39;, &#39;-0.04110885048813111&#39;, &#39;-0.047447972255757705&#39;, &#39;-0.0546020010270751&#39;, &#39;-0.06085394582564585&#39;, &#39;-0.06763344221466984&#39;, &#39;-0.0716767543722731&#39;, &#39;-0.03601263657929571&#39;, &#39;-0.03932225042348255&#39;, &#39;-0.04284028376523644&#39;, &#39;-0.046130868723622105&#39;, &#39;-0.049847493704913655&#39;, &#39;-0.053811612599211335&#39;, &#39;-0.05706485387918199&#39;, &#39;-0.06078658383423852&#39;, &#39;-0.06408164636046684&#39;, &#39;-0.036041944061507604&#39;, &#39;-0.03984641259296081&#39;, &#39;-0.04296111585875924&#39;, &#39;-0.046347350311635775&#39;, &#39;-0.02619439125418094&#39;, &#39;-0.030232687177739442&#39;, &#39;-0.03571591546240781&#39;, &#39;-0.04085000287523732&#39;, &#39;-0.04640403264864777&#39;, &#39;-0.051732623646788226&#39;, &#39;-0.05726670174845377&#39;, &#39;-0.0402435557093603&#39;, &#39;-0.04326307180375869&#39;, &#39;-0.04644053075124318&#39;, &#39;-0.049954235953758544&#39;, &#39;-0.05352383249335005&#39;, &#39;-0.05678574546435808&#39;, &#39;-0.02528836997339358&#39;, &#39;-0.02884082346710147&#39;, &#39;-0.03255580478066743&#39;, &#39;-0.03587037768484493&#39;, &#39;-0.04021989827780043&#39;, &#39;-0.04329894930914616&#39;, &#39;-0.047078468227348465&#39;, &#39;-0.050476719916329585&#39;, &#39;-0.005988783570101388&#39;, &#39;-0.01235133988778301&#39;, &#39;-0.018523402212861112&#39;, &#39;-0.025526168546366163&#39;, &#39;-0.032924118571653484&#39;, &#39;-0.039339636592640184&#39;, &#39;-0.046553744025255736&#39;, &#39;-0.0551724665740325&#39;, &#39;-0.018447699651772974&#39;, &#39;-0.023020679205523104&#39;, &#39;-0.029288662501040466&#39;, &#39;-0.03398985309011042&#39;, &#39;-0.03956735017514494&#39;, &#39;-0.04338725946655661&#39;, &#39;-0.04829273492150963&#39;, &#39;-0.05241836141615427&#39;, &#39;-0.057336827958860574&#39;, &#39;-0.010394876724731508&#39;, &#39;-0.016134713120152435&#39;, &#39;-0.022085105548331038&#39;, &#39;-0.028596394591746684&#39;, &#39;-0.03480400749543622&#39;, &#39;-0.04192972095053406&#39;, &#39;-0.04745652405326962&#39;, &#39;-0.03311718517526583&#39;, &#39;-0.03302399932881963&#39;, &#39;-0.031176510720928544&#39;, &#39;-0.02978910153287427&#39;, &#39;-0.02921795724140338&#39;, &#39;-0.028443500419189&#39;, &#39;-0.027374412246228948&#39;, &#39;-0.026788594065713118&#39;, &#39;-0.01941787467929916&#39;, &#39;-0.018274756087766294&#39;, &#39;-0.017023184703907773&#39;, &#39;-0.016098117576139805&#39;, &#39;-0.015349085431875058&#39;, &#39;-0.014799986712071698&#39;, &#39;-0.013308658191379483&#39;, &#39;-0.013164418810002514&#39;, &#39;-0.028191006141332322&#39;, &#39;-0.030269141727405392&#39;, &#39;-0.03191226590745878&#39;, &#39;-0.03548301943046597&#39;, &#39;-0.03871553470962431&#39;, &#39;-0.04186249426544656&#39;, &#39;-0.04296077800679008&#39;, &#39;-0.04440782469439238&#39;, &#39;-0.04616602897149815&#39;, &#39;0.020767817266558568&#39;, &#39;0.025462948873852673&#39;, &#39;0.030715892899674458&#39;, &#39;0.03574966063824592&#39;, &#39;0.040873266118669135&#39;, &#39;0.04664708650630849&#39;, &#39;0.052315536859782165&#39;, &#39;0.05733250431973923&#39;, &#39;0.01906936740296921&#39;, &#39;0.025392034294498392&#39;, &#39;0.0326510719230745&#39;, &#39;0.040148879510525634&#39;, &#39;0.04737927487118347&#39;, &#39;0.05490040582845708&#39;, &#39;0.06955294955500661&#39;]), (&#39;y&#39;, [&#39;0.009494448243235221&#39;, &#39;0.010747561820092998&#39;, &#39;0.012841087433091316&#39;, &#39;0.014443892464251854&#39;, &#39;0.015491525092333145&#39;, &#39;0.01686626363628834&#39;, &#39;0.017986047085988714&#39;, &#39;-0.004743373108852899&#39;, &#39;-0.00414692605407342&#39;, &#39;-0.0027902085655197462&#39;, &#39;-0.002097503659082017&#39;, &#39;-0.0007587796306668792&#39;, &#39;0.00015770659848042545&#39;, &#39;0.0006025950383560519&#39;, &#39;-0.021649274342110378&#39;, &#39;-0.023577244360474085&#39;, &#39;-0.025128946555706157&#39;, &#39;-0.027892800983241976&#39;, &#39;-0.02988172265718285&#39;, &#39;-0.03118857767759784&#39;, &#39;-0.03270891363962837&#39;, &#39;-0.0046551047532606485&#39;, &#39;-0.0056025877533007334&#39;, &#39;-0.0056376621749860455&#39;, &#39;-0.005947402145751195&#39;, &#39;-0.006536195661522422&#39;, &#39;-0.007313099937426751&#39;, &#39;-0.007343214175915011&#39;, &#39;-0.007405546251031804&#39;, &#39;-0.007900309210606554&#39;, &#39;-0.0396920468827263&#39;, &#39;-0.03911913122476624&#39;, &#39;-0.038627394586533026&#39;, &#39;-0.03847654947877443&#39;, &#39;-0.03809121423657051&#39;, &#39;-0.03927512723060957&#39;, &#39;-0.04036549869623533&#39;, &#39;-0.04163867424522669&#39;, &#39;-0.0432989566346347&#39;, &#39;-0.04442729173878937&#39;, &#39;-0.04610472781656266&#39;, &#39;-0.052075725558813166&#39;, &#39;-0.05370405914651417&#39;, &#39;-0.05499628897462972&#39;, &#39;-0.055976698902935974&#39;, &#39;-0.05658128338585721&#39;, &#39;-0.05816413197643698&#39;, &#39;0.012433015010061202&#39;, &#39;0.012597240441886702&#39;, &#39;0.012913214659407984&#39;, &#39;0.012903171154947357&#39;, &#39;0.013364190390883718&#39;, &#39;0.013091249039119414&#39;, &#39;0.0141876651598057&#39;, &#39;0.014489458953822783&#39;, &#39;0.009025410252984574&#39;, &#39;0.010516071606307595&#39;, &#39;0.013313772322751596&#39;, &#39;0.01588275663279321&#39;, &#39;0.018547350207008352&#39;, &#39;0.02175631458352921&#39;, &#39;0.02407666658694179&#39;, &#39;0.02553849723931654&#39;, &#39;0.05854492287303875&#39;, &#39;0.05590484073422668&#39;, &#39;0.05122348446838773&#39;, &#39;0.04649180178846831&#39;, &#39;0.0426670025919972&#39;, &#39;0.03874026896942184&#39;, &#39;0.034213667690354464&#39;, &#39;0.030419524368738737&#39;, &#39;0.02675101769791878&#39;, &#39;-0.05319568028808208&#39;, &#39;-0.056240647045853756&#39;, &#39;-0.0601167765653312&#39;, &#39;-0.06380557255244745&#39;, &#39;-0.06724774278502235&#39;, &#39;-0.07113454198606671&#39;, &#39;-0.07463786766225418&#39;, &#39;0.004097457625063281&#39;, &#39;0.004590795962164553&#39;, &#39;0.005309749280098372&#39;, &#39;0.005634037026647614&#39;, &#39;0.006126798216096763&#39;, &#39;0.006447310426835736&#39;, &#39;0.006870988254181082&#39;, &#39;0.0070590960848564265&#39;, &#39;0.01031228542754786&#39;, &#39;0.010700358511159318&#39;, &#39;0.010936806639021796&#39;, &#39;0.011528188058713805&#39;, &#39;0.011388246284207095&#39;, &#39;0.012120268645629971&#39;, &#39;0.012748822808859089&#39;, &#39;0.01212610266516566&#39;, &#39;-0.009000946105436052&#39;, &#39;-0.008423983395687396&#39;, &#39;-0.006999337258411951&#39;, &#39;-0.006165269102720269&#39;, &#39;-0.00480146422870285&#39;, &#39;-0.003267846836804627&#39;, &#39;-0.0028412979310595146&#39;, &#39;-0.0018336444489945973&#39;, &#39;-0.0011341634562997676&#39;, &#39;-0.016306972716842692&#39;, &#39;-0.01470720845165668&#39;, &#39;-0.013598487009333709&#39;, &#39;-0.01250905217608524&#39;, &#39;-0.011352216952677366&#39;, &#39;-0.010417017241299103&#39;, &#39;-0.009784363245730175&#39;, &#39;-0.008476242324381307&#39;, &#39;-0.03514721331657693&#39;, &#39;-0.03506135030418204&#39;, &#39;-0.03545089395244239&#39;, &#39;-0.03595036532882054&#39;, &#39;-0.036360684281139616&#39;, &#39;-0.03624617523925823&#39;, &#39;-0.037742750158978565&#39;]), (&#39;z&#39;, [&#39;-0.05183359460588243&#39;, &#39;-0.05047501573015003&#39;, &#39;-0.048207655257041376&#39;, &#39;-0.046619435510000265&#39;, &#39;-0.04497682699889046&#39;, &#39;-0.04340181075387471&#39;, &#39;-0.04107624234755524&#39;, &#39;-0.022778390466105705&#39;, &#39;-0.022597526253922827&#39;, &#39;-0.02252975600716557&#39;, &#39;-0.02235155104618733&#39;, &#39;-0.02274276777050384&#39;, &#39;-0.02217144447910572&#39;, &#39;-0.022550131439274167&#39;, &#39;-0.02179582027681986&#39;, &#39;-0.021733072933795443&#39;, &#39;-0.020585174736606454&#39;, &#39;-0.01857017372543246&#39;, &#39;-0.01515904517478371&#39;, &#39;-0.012127814066912808&#39;, &#39;-0.009671826145326854&#39;, &#39;-0.014698376355467642&#39;, &#39;-0.014205506103876468&#39;, &#39;-0.014410448044692702&#39;, &#39;-0.01383371722489623&#39;, &#39;-0.013679119044125927&#39;, &#39;-0.012999810424485966&#39;, &#39;-0.013074284363298957&#39;, &#39;-0.01262662633288726&#39;, &#39;-0.012197871728333242&#39;, &#39;-0.0069288010555816505&#39;, &#39;-0.005127080429740321&#39;, &#39;-0.003993675774381358&#39;, &#39;-0.002705606744890508&#39;, &#39;-0.018973998365500927&#39;, &#39;-0.01815938418647786&#39;, &#39;-0.017270138150980253&#39;, &#39;-0.016702795523101874&#39;, &#39;-0.0162048127589235&#39;, &#39;-0.015769001843894473&#39;, &#39;-0.014686600088534117&#39;, &#39;0.016413354505750974&#39;, &#39;0.016968160205620843&#39;, &#39;0.017365508002423844&#39;, &#39;0.017527833844906478&#39;, &#39;0.017464515395551505&#39;, &#39;0.01812775683645915&#39;, &#39;0.0006758917544064189&#39;, &#39;0.002078088569855221&#39;, &#39;0.0021973953224466124&#39;, &#39;0.0026288992006117014&#39;, &#39;0.003676861395166214&#39;, &#39;0.004439875912258013&#39;, &#39;0.0055375870122976205&#39;, &#39;0.00620916368398131&#39;, &#39;0.022086488416033508&#39;, &#39;0.023521492444044854&#39;, &#39;0.024770210958185823&#39;, &#39;0.026510132703070573&#39;, &#39;0.02787137047535286&#39;, &#39;0.028771892637621657&#39;, &#39;0.03044359399174934&#39;, &#39;0.03151216815712135&#39;, &#39;-0.011196688584901743&#39;, &#39;-0.009784655773775306&#39;, &#39;-0.007410432739920125&#39;, &#39;-0.004608125849451155&#39;, &#39;-0.0014293385676374826&#39;, &#39;0.003589351116288433&#39;, &#39;0.008720997235853276&#39;, &#39;0.012981982295955083&#39;, &#39;0.018367602490153866&#39;, &#39;0.010794815286274437&#39;, &#39;0.011419433087887725&#39;, &#39;0.012037888539151746&#39;, &#39;0.012572462360966548&#39;, &#39;0.013253432901994967&#39;, &#39;0.013943278322589112&#39;, &#39;0.014791924119001982&#39;, &#39;-0.01513686365456282&#39;, &#39;-0.013217676269591831&#39;, &#39;-0.009280705813397601&#39;, &#39;-0.004677888392277592&#39;, &#39;-0.0017858969711355335&#39;, &#39;0.0018361595012149883&#39;, &#39;0.005125211253563735&#39;, &#39;0.009517382082103308&#39;, &#39;0.03842221947154943&#39;, &#39;0.04277255469803235&#39;, &#39;0.04724991636280847&#39;, &#39;0.05025295537436438&#39;, &#39;0.05321120162249208&#39;, &#39;0.057687069365786305&#39;, &#39;0.061747858184451825&#39;, &#39;0.06462020374651212&#39;, &#39;0.029723481543052613&#39;, &#39;0.03200179324021583&#39;, &#39;0.03434415034556366&#39;, &#39;0.03920579944852436&#39;, &#39;0.04340676679293252&#39;, &#39;0.04723721659196162&#39;, &#39;0.049006658815112694&#39;, &#39;0.05156017125914732&#39;, &#39;0.05399355014982837&#39;, &#39;-0.024449404920125456&#39;, &#39;-0.02604195290510526&#39;, &#39;-0.026874878467477666&#39;, &#39;-0.028050949596746498&#39;, &#39;-0.02926498231339321&#39;, &#39;-0.030541666753819696&#39;, &#39;-0.03164797015468725&#39;, &#39;-0.03250987171752812&#39;, &#39;-0.016783937712690156&#39;, &#39;-0.015837632464431775&#39;, &#39;-0.014794048239785832&#39;, &#39;-0.01402058079916657&#39;, &#39;-0.012895681956291953&#39;, &#39;-0.011561203555164297&#39;, &#39;-0.009948805314876805&#39;]), (&#39;size&#39;, [&#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;, &#39;n/a&#39;])],)
/home/circleci/project/mne_bids/dig.py:539: RuntimeWarning: Fiducial point nasion not found, assuming identity unknown to head transformation
  raw.set_montage(montage, on_missing=&#39;warn&#39;)
Recovered coordinate: [-0.0231477   0.00949445 -0.05183359]
Saved coordinate:     [-0.0231477   0.00949445 -0.05183359]
</pre></div>
</div>
<p>Now we should go back to “head” coordinates. We do this with <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code>
fiducials which are in MNI space. In this case, you would not need to run
the Freesurfer <code class="docutils literal notranslate"><span class="pre">recon-all</span></code> for the subject, you would just need a
<code class="docutils literal notranslate"><span class="pre">subjects_dir</span></code> with <code class="docutils literal notranslate"><span class="pre">fsaverage</span></code> in it, which is accessible using
<a class="reference external" href="https://mne.tools/dev/generated/mne.datasets.fetch_fsaverage.html#mne.datasets.fetch_fsaverage" title="(in MNE v1.0)"><code class="xref py py-func docutils literal notranslate"><span class="pre">mne.datasets.fetch_fsaverage()</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a> <span class="o">=</span> <a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.get_montage" title="mne.io.BaseRaw.get_montage" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">get_montage</span></a><span class="p">()</span>
<span class="c1"># add fiducials for &quot;mni_tal&quot; (which is the coordinate frame fsaverage is in)</span>
<span class="c1"># so that it can properly be set to &quot;head&quot;</span>
<a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage.add_mni_fiducials" title="mne.channels.DigMontage.add_mni_fiducials" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-method"><span class="n">montage</span><span class="o">.</span><span class="n">add_mni_fiducials</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a><span class="o">=</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">subjects_dir</span></a><span class="p">)</span>

<span class="c1"># Many other templates are included in the Freesurfer installation,</span>
<span class="c1"># so, for those, the fiducials can be estimated with</span>
<span class="c1"># ``montage.add_estimated_fiducials(template, os.environ[&#39;FREESURFER_HOME&#39;])``</span>
<span class="c1"># where ``template`` maybe be ``cvs_avg35_inMNI152`` for instance</span>
<a href="https://mne.tools/dev/generated/mne.io.BaseRaw.html#mne.io.BaseRaw.set_montage" title="mne.io.BaseRaw.set_montage" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-method"><span class="n">raw</span><span class="o">.</span><span class="n">set_montage</span></a><span class="p">(</span><a href="https://mne.tools/dev/generated/mne.channels.DigMontage.html#mne.channels.DigMontage" title="mne.channels.DigMontage" class="sphx-glr-backref-module-mne-channels sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">montage</span></a><span class="p">)</span>
</pre></div>
</div>
<div class="output_subarea output_html rendered_html output_result">
<table class="table table-hover table-striped table-sm table-responsive small">
    <tr>
        <th>Measurement date</th>

        <td>August 29, 1937  11:09:44 GMT</td>

    </tr>
    <tr>
        <th>Experimenter</th>

        <td>mne_anonymize</td>

    </tr>
        <th>Participant</th>


            <td>sub-1</td>


    </tr>
    <tr>
        <th>Digitized points</th>

        <td>0 points</td>

    </tr>
    <tr>
        <th>Good channels</th>
        <td>119 sEEG</td>
    </tr>
    <tr>
        <th>Bad channels</th>
        <td>None</td>
    </tr>
    <tr>
        <th>EOG channels</th>
        <td>Not available</td>
    </tr>
    <tr>
        <th>ECG channels</th>
        <td>Not available</td>

    <tr>
        <th>Sampling frequency</th>
        <td>999.41 Hz</td>
    </tr>


    <tr>
        <th>Highpass</th>
        <td>0.00 Hz</td>
    </tr>


    <tr>
        <th>Lowpass</th>
        <td>499.71 Hz</td>
    </tr>



    <tr>
        <th>Filenames</th>
        <td>sub-1_task-motor_ieeg.eeg</td>
    </tr>

    <tr>
        <th>Duration</th>
        <td>00:01:00 (HH:MM:SS)</td>
    </tr>
</table>
</div>
<br />
<br /><p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  5.844 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-convert-ieeg-to-bids-py">
<div class="binder-badge docutils container">
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/mne-tools/mne-bids/gh-pages?filepath=dev/notebooks/auto_examples/convert_ieeg_to_bids.ipynb"><img alt="Launch binder" src="../_images/binder_badge_logo.svg" width="150px" /></a>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/a577037ece7a732b0607a269316e55b8/convert_ieeg_to_bids.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">convert_ieeg_to_bids.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/cf640e6bfa39f55978e620ef4269fd4c/convert_ieeg_to_bids.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">convert_ieeg_to_bids.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="convert_mri_and_trans.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">07. Save and load T1-weighted MRI scan along with anatomical landmarks in BIDS</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="convert_empty_room.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">09. Storing empty room data in BIDS format</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2017-2022, MNE Developers. Last updated on 2022-03-03.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>